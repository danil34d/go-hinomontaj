# Инструкция по развертыванию

## Требования
- Go 1.16 или выше
- SQLite3
- Доступ к порту 8080 (или другому, если изменен в конфигурации)

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/hinomontaj.git
cd hinomontaj
```

2. Установите зависимости:
```bash
go mod download
```

3. Создайте базу данных:
```bash
sqlite3 hinomontaj.db < migrations/init.sql
```

4. Запустите приложение:
```bash
go run main.go
```

## Конфигурация

### Параметры сервера
Параметры сервера можно изменить в файле `main.go`:
```go
const (
    port = ":8080"
    dbPath = "hinomontaj.db"
)
```

### База данных
По умолчанию используется SQLite. Для использования другой СУБД:
1. Измените драйвер в `models/db.go`
2. Обновите SQL-запросы в соответствии с синтаксисом выбранной СУБД
3. Создайте новую базу данных и примените миграции

## Резервное копирование

### База данных
```bash
# Создание резервной копии
sqlite3 hinomontaj.db ".backup 'backup.db'"

# Восстановление из резервной копии
sqlite3 hinomontaj.db ".restore 'backup.db'"
```

### Файлы конфигурации
Рекомендуется хранить копии следующих файлов:
- `static/price.json`
- `static/price_ds.json`
- `hinomontaj.db`

## Мониторинг

### Логи
Логи приложения сохраняются в стандартный вывод. Для сохранения в файл:
```bash
go run main.go > app.log 2>&1
```

### Метрики
- Доступность: GET http://localhost:8080/
- Статус БД: Проверка подключения при старте
- Производительность: Мониторинг времени ответа API

## Обновление

1. Остановите текущую версию приложения
2. Создайте резервную копию базы данных
3. Обновите код:
```bash
git pull
go mod download
```
4. Запустите новую версию:
```bash
go run main.go
```

## Устранение неполадок

### Проблемы с базой данных
1. Проверьте права доступа к файлу БД
2. Убедитесь, что БД не заблокирована
3. Проверьте целостность БД:
```bash
sqlite3 hinomontaj.db "PRAGMA integrity_check;"
```

### Проблемы с сервером
1. Проверьте, что порт не занят:
```bash
netstat -tuln | grep 8080
```
2. Проверьте логи на наличие ошибок
3. Убедитесь, что все зависимости установлены

### Проблемы с фронтендом
1. Очистите кэш браузера
2. Проверьте консоль разработчика на наличие ошибок
3. Убедитесь, что все статические файлы загружаются 